@using WebTIGA;
@model WebTIGA.Models.ContenedorModelos

@{
    var DPA_Opcion_Votacion = Model.DPA_Opcion_Votacion.ToList();
    var cont = 0;
}

<div class="container " style="font-size: 0.9rem;">

    <div class="row align-items-center justify-content-center">
        <div class="col-3">
            <label>Criticidad elegida año anterior: </label>
        </div>

        <div class="col-3">
            <input type="text" class="form-control form-control-sm text-center" value="@(ViewBag.CriticidadAnterior == null ? "-" : ViewBag.CriticidadAnterior)" disabled />
        </div>
        @if (ViewBag.CriticidadAnterior != null)
        {
            <div class="col-1">
                @if (ViewBag.CriticidadAnterior == "Alta")
                {
                    <h5><span class="badge badge-danger"><i class="fas fa-circle"></i></span></h5>                   
                }
                else if (ViewBag.CriticidadAnterior == "Media")
                {
                    <h5><span class="badge badge-warning"><i class="fas fa-circle text-light"></i></span></h5>                   
                }
                else if (ViewBag.CriticidadAnterior == "Baja")
                {
                    <h5><span class="badge badge-success"><i class="fas fa-circle"></i></span></h5>                   
                }
            </div>
        }
    </div>

    <hr />

    <div class="row align-items-center justify-content-center pb-3 font-weight-bold text-center">
        <div class="col-3">
            <span>Criterio</span>
        </div>
        <div class="col-5">
            <span>Opción</span>
        </div>
        <div class="col-2">
            <span>Peso</span>
        </div>
    </div>


    @using (Html.BeginForm())
    {
        @Html.AntiForgeryToken()

        foreach (var item in Model.DPA_Criterio_Votacion)
        {
            <div class="row align-items-center justify-content-center pb-3">

                <div class="col-3 ">
                    @item.Criterio
                </div>

                <div class="col-5">
                    <select class="form-control form-control-sm" id="selectOpcionVotacion_@item.ID_Criterio" name="votaciones[@cont].ID_Opcion_Votacion" onchange="cambiarPesoSeleccionado(@item.ID_Criterio)" required>
                        <option value="" selected disabled> -- Seleccionar -- </option>
                        @foreach (var item2 in item.DPA_Opcion_Votacion)
                        {
                            <option value="@item2.ID_Opcion_Votacion" data-peso="@((int)item2.Peso_Opcion)">@item2.Opcion</option>
                        }
                    </select>
                </div>

                <div class="col-2">
                    <input type="text" id="inputPesoOpcion_@item.ID_Criterio" class="form-control form-control-sm text-center" disabled>
                    <input type="text" name="votaciones[@cont].ID_Usuario" value="@ViewBag.IdUsuario" hidden />
                    <input type="text" name="votaciones[@cont].ID_Evaluacion_Plan" value="@ViewBag.EvaluacionPlan.ID_Evaluacion_Plan" hidden />
                </div>
            </div>
            cont += 1;
        }


        <div class="form-group text-center pt-3">
            <button type="button" class="btn btn-filter btn-outline-secondary btn-group-toggle mr-2" data-dismiss="modal">
                <i class="fas fa-times-circle"></i> Cancelar
            </button>

            <button type="submit" class="btn btn-filter btn-info btn-group-toggle">
                <i class="fas fa-check-circle"></i> Agregar Votación
            </button>
        </div>
    }
</div>










